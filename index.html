<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’µ å­˜é’±å°å·¥å…· - v6.1 ä¿®å¤ç‰ˆ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:linear-gradient(135deg,#1b5e20,#2e7d32,#85bb65);min-height:100vh;padding:15px}
.container{max-width:800px;margin:0 auto}
h1{color:white;text-align:center;margin-bottom:10px}
.user-bar{background:rgba(255,255,255,0.15);padding:12px;border-radius:25px;text-align:center;color:white;margin-bottom:15px}
.user-bar a{color:#ffd700;cursor:pointer;text-decoration:underline;margin:0 10px}
.btn{background:linear-gradient(135deg,#1b5e20,#2e7d32);color:white;border:none;padding:12px 20px;border-radius:8px;font-size:1rem;cursor:pointer;display:inline-block;margin:0 5px}
.btn-gold{background:linear-gradient(135deg,#ffd700,#ffb300);color:#1b5e20;font-weight:bold}
.btn-small{padding:8px 15px;font-size:0.85rem}
.btn-outline{background:white;border:2px solid #1b5e20;color:#1b5e20}
.btn-danger{background:#f56565}
.section{background:white;border-radius:12px;padding:20px;margin-bottom:15px}
.section h2{margin-bottom:15px;color:#333;font-size:1.1rem}
.form-group{margin-bottom:12px}
label{display:block;margin-bottom:5px;color:#555;font-size:0.9rem}
input,select,textarea{width:100%;padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:1rem}
.plan-tabs{display:flex;gap:10px;margin-bottom:15px;border-bottom:2px solid #e0e0e0;padding-bottom:10px}
.plan-tab{padding:8px 16px;cursor:pointer;border-radius:20px;background:#f5f5f5;color:#666}
.plan-tab.active{background:#1b5e20;color:white}
.goal-card{border:2px solid #e0e0e0;border-radius:12px;padding:15px;margin-bottom:12px}
.goal-card.private{border-left:4px solid #2196F3}
.goal-card.family{border-left:4px solid #ff9800;background:#fffde7}
.goal-header{display:flex;justify-content:space-between;margin-bottom:10px}
.goal-name{font-weight:bold;font-size:1.1rem}
.badge{padding:4px 10px;border-radius:12px;font-size:0.75rem}
.badge-private{background:#e3f2fd;color:#1976d2}
.badge-family{background:#ff9800;color:white}
.members{display:flex;gap:5px;margin:10px 0;flex-wrap:wrap}
.member-tag{background:#f5f5f5;padding:4px 12px;border-radius:15px;font-size:0.8rem}
.member-tag.me{background:#1b5e20;color:white}
.progress-bar{height:20px;background:#e8e8e8;border-radius:10px;overflow:hidden;margin:10px 0}
.progress-fill{height:100%;background:linear-gradient(90deg,#1b5e20,#4caf50,#ffd700);border-radius:10px}
.goal-stats{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin:10px 0;font-size:0.8rem;color:#666;text-align:center}
.actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);justify-content:center;align-items:center;z-index:1000}
.modal.active{display:flex}
.modal-content{background:white;padding:25px;border-radius:12px;width:90%;max-width:400px;max-height:90vh;overflow-y:auto}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.close-btn{font-size:1.5rem;cursor:pointer;color:#999}
.share-box{background:#f8f9fa;padding:15px;border-radius:8px;border:2px dashed #ccc;font-family:monospace;font-size:0.8rem;word-break:break-all;margin:10px 0}
.empty{text-align:center;padding:30px;color:#999}
.version-tag{position:fixed;bottom:10px;right:10px;background:rgba(0,0,0,0.4);color:white;padding:4px 12px;border-radius:20px;font-size:0.75rem}
</style>
</head>
<body>
<div class="container">
<h1>ğŸ’µ å­˜é’±å°å·¥å…·</h1>
<div class="user-bar">
æˆ‘æ˜¯: <strong id="displayName">æˆ‘</strong>
<a id="renameLink">æ”¹å</a>
<button class="btn" id="joinBtn">ğŸ‘‹ åŠ å…¥å®¶åº­è®¡åˆ’</button>
</div>
<div class="section">
<h2>ğŸ¯ æ–°å»ºè®¡åˆ’</h2>
<form id="createForm">
<div class="form-group"><label>è®¡åˆ’åç§°</label><input type="text" id="gName" placeholder="ä¾‹å¦‚ï¼šä¹°æ–°è½¦" required></div>
<div class="form-group"><label>ç›®æ ‡é‡‘é¢ (Â¥)</label><input type="number" id="gTarget" placeholder="100000" min="1" required></div>
<div class="form-group"><label>è®¡åˆ’æ—¶é•¿ï¼ˆæœˆï¼‰</label><input type="number" id="gMonths" placeholder="24" min="1" required></div>
<div class="form-group"><label>è®¡åˆ’ç±»å‹</label><select id="gType"><option value="private">ğŸ”’ ç§äººè®¡åˆ’</option><option value="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­è®¡åˆ’</option></select></div>
<button type="submit" class="btn">âœ¨ åˆ›å»ºè®¡åˆ’</button>
</form>
</div>
<div class="section">
<div class="plan-tabs"><div class="plan-tab active" data-tab="all">å…¨éƒ¨</div><div class="plan-tab" data-tab="private">ğŸ”’ ç§äºº</div><div class="plan-tab" data-tab="family">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­</div></div>
<h2>ğŸ“‹ æˆ‘çš„è®¡åˆ’</h2>
<div id="goalsList"><div class="empty">è¿˜æ²¡æœ‰è®¡åˆ’ï¼Œåˆ›å»ºä¸€ä¸ªå§ï¼</div></div>
</div>
<div class="section">
<h2>ğŸ“ æœ€è¿‘å­˜å…¥è®°å½•</h2>
<div id="recordsList"><div class="empty">è¿˜æ²¡æœ‰è®°å½•</div></div>
</div>
</div>
<div class="version-tag">v6.1 ä¿®å¤ç‰ˆ</div>

<div class="modal" id="depositModal">
<div class="modal-content">
<div class="modal-header"><h3>ğŸ’° å­˜å…¥é‡‘é¢</h3><span class="close-btn" data-close="depositModal">&times;</span></div>
<form id="depositForm">
<input type="hidden" id="dGoalId">
<div class="form-group"><label>è®¡åˆ’åç§°</label><input type="text" id="dGoalName" readonly style="background:#f5f5f5"></div>
<div class="form-group"><label>å­˜å…¥é‡‘é¢ (Â¥)</label><input type="number" id="dAmount" placeholder="5000" min="1" required></div>
<div class="form-group"><label>å¤‡æ³¨ï¼ˆå¯é€‰ï¼‰</label><input type="text" id="dNote" placeholder="ä¾‹å¦‚ï¼šæœ¬æœˆå·¥èµ„"></div>
<button type="submit" class="btn btn-gold" style="width:100%">ç¡®è®¤å­˜å…¥</button>
</form>
</div>
</div>

<div class="modal" id="inviteModal">
<div class="modal-content">
<div class="modal-header"><h3>ğŸ”— é‚€è¯·å®¶äºº</h3><span class="close-btn" data-close="inviteModal">&times;</span></div>
<p style="color:#666;margin-bottom:10px">å¤åˆ¶åˆ†äº«ç ç»™å®¶äººï¼š</p>
<div class="share-box" id="inviteCode"></div>
<button class="btn" id="copyInviteBtn" style="width:100%">ğŸ“‹ å¤åˆ¶</button>
</div>
</div>

<div class="modal" id="joinModal">
<div class="modal-content">
<div class="modal-header"><h3>ğŸ‘‹ åŠ å…¥å®¶åº­è®¡åˆ’</h3><span class="close-btn" data-close="joinModal">&times;</span></div>
<p style="color:#666;margin-bottom:10px">ç²˜è´´åˆ†äº«ç å³å¯åŠ å…¥ï¼š</p>
<form id="joinForm">
<div class="form-group"><label>åˆ†äº«ç </label><textarea id="joinCode" rows="4" placeholder="è¯·ç²˜è´´åˆ†äº«ç ..." required></textarea></div>
<button type="submit" class="btn" style="width:100%">ç«‹å³åŠ å…¥</button>
</form>
</div>
</div>

<div class="modal" id="userModal">
<div class="modal-content">
<div class="modal-header"><h3>è®¾ç½®åç§°</h3><span class="close-btn" data-close="userModal">&times;</span></div>
<form id="userForm">
<div class="form-group"><label>ä½ çš„åå­—</label><input type="text" id="userNameInput" placeholder="ä¾‹å¦‚ï¼šçˆ¸çˆ¸" required></div>
<button type="submit" class="btn" style="width:100%">ä¿å­˜</button>
</form>
</div>
</div>

<script>
var STORAGE_KEY="savings_v6_data";
var USER_KEY="savings_v6_user";
var currentTab="all";

function getUser(){return localStorage.getItem(USER_KEY)||"æˆ‘"}
function setUser(name){localStorage.setItem(USER_KEY,name)}
function loadData(){try{var d=localStorage.getItem(STORAGE_KEY);return d?JSON.parse(d):{goals:[],records:[]}}catch(e){return{goals:[],records:[]}}}
function saveData(data){try{localStorage.setItem(STORAGE_KEY,JSON.stringify(data));return true}catch(e){alert("ä¿å­˜å¤±è´¥ï¼š"+e.message);return false}}
function genId(){return Date.now().toString(36)+Math.random().toString(36).substr(2,6)}
function fmtMoney(n){return"Â¥"+parseFloat(n).toLocaleString("zh-CN",{maximumFractionDigits:0})}
function getSaved(gid,recs){var t=0;for(var i=0;i<recs.length;i++)if(recs[i].goalId===gid)t+=recs[i].amount;return t}
function canView(goal,user){if(goal.type==="private")return goal.owner===user;if(goal.owner===user)return true;if(goal.members)for(var i=0;i<goal.members.length;i++)if(goal.members[i]===user)return true;return false}
function isOwner(goal){return goal.owner===getUser()}
function canDeposit(goal){var user=getUser();if(goal.type==="private")return goal.owner===user;return canView(goal,user)}
function escapeHtml(text){if(!text)return"";return text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}
function showModal(id){document.getElementById(id).classList.add("active")}
function closeModal(id){document.getElementById(id).classList.remove("active")}

// ç¼–ç åˆ†äº«ç ï¼ˆå¤„ç†ä¸­æ–‡ï¼‰
function encodeShareCode(obj){
return btoa(encodeURIComponent(JSON.stringify(obj)));
}

// è§£ç åˆ†äº«ç 
try{
var testObj={type:"test",name:"ä¸­æ–‡æµ‹è¯•"};
var testCode=encodeShareCode(testObj);
var testDecode=JSON.parse(decodeURIComponent(atob(testCode)));
console.log("ç¼–ç è§£ç æµ‹è¯•:",testDecode.name==="ä¸­æ–‡æµ‹è¯•"?"âœ… é€šè¿‡":"âŒ å¤±è´¥");
}catch(e){
console.log("ç¼–ç æµ‹è¯•å¤±è´¥:",e.message);
}

function switchTab(tab){
currentTab=tab;
var tabs=document.querySelectorAll(".plan-tab");
for(var i=0;i<tabs.length;i++){
if(tabs[i].dataset.tab===tab)tabs[i].classList.add("active");
else tabs[i].classList.remove("active");
}
var titles={all:"ğŸ“‹ å…¨éƒ¨è®¡åˆ’",private:"ğŸ”’ ç§äººè®¡åˆ’",family:"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­è®¡åˆ’"};
document.getElementById("planTitle").textContent=titles[tab];
render();
}

function render(){
var data=loadData();
var user=getUser();
document.getElementById("displayName").textContent=user;

var myGoals=[];
for(var i=0;i<data.goals.length;i++){
if(canView(data.goals[i],user))myGoals.push(data.goals[i]);
}

var visible=myGoals;
if(currentTab==="private"){
visible=[];
for(var j=0;j<myGoals.length;j++)if(myGoals[j].type==="private")visible.push(myGoals[j]);
}else if(currentTab==="family"){
visible=[];
for(var k=0;k<myGoals.length;k++)if(myGoals[k].type==="family")visible.push(myGoals[k]);
}

var list=document.getElementById("goalsList");
if(visible.length===0){
list.innerHTML='<div class="empty">è¿˜æ²¡æœ‰è®¡åˆ’ï¼Œåˆ›å»ºä¸€ä¸ªå§ï¼</div>';
}else{
var html="";
for(var m=0;m<visible.length;m++){
var g=visible[m];
var saved=getSaved(g.id,data.records);
var pct=Math.min(100,(saved/g.target*100)).toFixed(1);
var isDone=saved>=g.target;
var isFamily=g.type==="family";

html+='<div class="goal-card '+(isFamily?"family":"private")+'">';
html+='<div class="goal-header"><span class="goal-name">'+escapeHtml(g.name)+'</span>';
html+='<span class="badge '+(isFamily?"badge-family":"badge-private")+'">'+(isFamily?"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ å®¶åº­":"ğŸ”’ ç§äºº")+"</span></div>";

if(isFamily){
var members=[g.owner||"æˆ‘"];
if(g.members)for(var n=0;n<g.members.length;n++)if(g.members[n]!==g.owner)members.push(g.members[n]);
if(members.length>0){
html+='<div class="members">';
for(var p=0;p<members.length;p++){
var member=members[p];
html+='<span class="member-tag '+(member===user?"me":"")+'">'+(member===user?"æˆ‘":escapeHtml(member))+(member===g.owner?" ğŸ‘‘":"")+"</span>";
}
html+="</div>";
}
}

html+='<div class="goal-stats">';
html+='<div><strong>'+fmtMoney(g.target)+'</strong><br>ç›®æ ‡</div>';
html+='<div><strong>'+fmtMoney(saved)+'</strong><br>å·²å­˜</div>';
html+='<div><strong>'+fmtMoney(Math.max(0,g.target-saved))+'</strong><br>å‰©ä½™</div>';
html+='<div><strong>'+fmtMoney(parseFloat(g.monthly))+'</strong><br>æ¯æœˆ</div>';
html+="</div>";

html+='<div class="progress-bar"><div class="progress-fill" style="width:'+pct+'%"></div></div>';
html+='<div style="text-align:center;font-size:0.9rem;color:#666;margin:5px 0">'+pct+"% "+(isDone?"âœ… å·²å®Œæˆ":"â³ è¿›è¡Œä¸­")+"</div>";

html+='<div class="actions">';
if(canDeposit(g)){
html+='<button type="button" class="btn btn-gold btn-small btn-deposit" data-id="'+g.id+'" data-name="'+escapeHtml(g.name)+'">ğŸ’° å­˜å…¥</button>';
}
if(isFamily&&isOwner(g)){
html+='<button type="button" class="btn btn-outline btn-small btn-invite" data-id="'+g.id+'">ğŸ”— é‚€è¯·</button>';
}
if(isOwner(g)){
html+='<button type="button" class="btn btn-danger btn-small btn-delete" data-id="'+g.id+'">ğŸ—‘ï¸ åˆ é™¤</button>';
}
html+="</div></div>";
}
list.innerHTML=html;
}

var recs=[];
for(var r=0;r<data.records.length;r++){
var found=false;
for(var s=0;s<myGoals.length;s++){
if(myGoals[s].id===data.records[r].goalId){found=true;break;}
}
if(found)recs.push(data.records[r]);
}
recs.sort(function(a,b){return new Date(b.date)-new Date(a.date)});
recs=recs.slice(0,15);

var rlist=document.getElementById("recordsList");
if(recs.length===0){
rlist.innerHTML='<div class="empty">è¿˜æ²¡æœ‰è®°å½•</div>';
}else{
var rhtml="";
for(var t=0;t<recs.length;t++){
var rec=recs[t];
var goalName="";
for(var u=0;u<data.goals.length;u++){
if(data.goals[u].id===rec.goalId){goalName=data.goals[u].name;break;}
}
rhtml+='<div style="padding:10px;border-bottom:1px solid #f0f0f0">';
rhtml+='<div style="display:flex;justify-content:space-between">';
rhtml+='<span><strong style="color:#1b5e20">+'+fmtMoney(rec.amount)+'</strong> '+escapeHtml(goalName)+'</span>';
rhtml+='<span style="color:#999;font-size:0.8rem">'+rec.date.slice(0,10)+"</span>";
rhtml+="</div>";
rhtml+='<div style="font-size:0.85rem;color:#666">'+(rec.who||"æˆ‘")+" å­˜å…¥"+(rec.note?" Â· "+escapeHtml(rec.note):"")+"</div>";
rhtml+="</div>";
}
rlist.innerHTML=rhtml;
}
}

document.addEventListener("DOMContentLoaded",function(){
console.log("âœ… é¡µé¢åŠ è½½å®Œæˆ");

var tabs=document.querySelectorAll(".plan-tab");
for(var i=0;i<tabs.length;i++){
tabs[i].addEventListener("click",function(){switchTab(this.dataset.tab)});
}

document.getElementById("createForm").addEventListener("submit",function(e){
e.preventDefault();
var name=document.getElementById("gName").value.trim();
var target=parseFloat(document.getElementById("gTarget").value);
var months=parseInt(document.getElementById("gMonths").value);
var type=document.getElementById("gType").value;

if(!name){alert("è¯·è¾“å…¥è®¡åˆ’åç§°");return}
if(!target||target<=0){alert("è¯·è¾“å…¥ç›®æ ‡é‡‘é¢");return}
if(!months||months<=0){alert("è¯·è¾“å…¥è®¡åˆ’æ—¶é•¿");return}

var data=loadData();
var g={
id:genId(),
name:name,
target:target,
months:months,
monthly:(target/months).toFixed(2),
type:type,
owner:getUser(),
members:[],
createdAt:new Date().toISOString()
};

data.goals.push(g);
if(!saveData(data))return;

this.reset();
render();

if(type==="family"){
alert("âœ… å®¶åº­è®¡åˆ’åˆ›å»ºæˆåŠŸï¼\\n\\nç‚¹å‡»è®¡åˆ’å¡ç‰‡ä¸Šçš„ã€é‚€è¯·ã€‘æŒ‰é’®åˆ†äº«é‚€è¯·ç ç»™å®¶äººã€‚");
}else{
alert("âœ… ç§äººè®¡åˆ’åˆ›å»ºæˆåŠŸï¼");
}
});

document.getElementById("depositForm").addEventListener("submit",function(e){
e.preventDefault();
var gid=document.getElementById("dGoalId").value;
var amount=parseFloat(document.getElementById("dAmount").value);
var note=document.getElementById("dNote").value;

if(!amount||amount<=0){alert("è¯·è¾“å…¥æœ‰æ•ˆé‡‘é¢");return}

var data=loadData();
data.records.push({
id:genId(),
goalId:gid,
amount:amount,
note:note,
who:getUser(),
date:new Date().toISOString()
});

saveData(data);
closeModal("depositModal");
this.reset();
render();
alert("âœ… å­˜å…¥æˆåŠŸï¼");
});

document.getElementById("joinForm").addEventListener("submit",function(e){
e.preventDefault();
try{
var code=document.getElementById("joinCode").value.trim();
if(!code){alert("è¯·è¾“å…¥åˆ†äº«ç ");return}

// è§£ç åˆ†äº«ç ï¼ˆå¤„ç†ä¸­æ–‡ï¼‰
var share=JSON.parse(decodeURIComponent(atob(code)));

if(share.type!=="savings_v4")throw new Error("æ— æ•ˆçš„åˆ†äº«ç æ ¼å¼");

var data=loadData();
var user=getUser();

var exists=false;
for(var i=0;i<data.goals.length;i++){
if(data.goals[i].id===share.planId){exists=true;break}
}

if(exists){alert("âš ï¸ ä½ å·²ç»åœ¨è¿™ä¸ªå®¶åº­è®¡åˆ’ä¸­äº†ï¼");return}

data.goals.push({
id:share.planId,
name:share.name,
target:share.target,
months:share.months,
monthly:share.monthly,
type:"family",
owner:share.owner,
members:[user],
joinedAt:new Date().toISOString()
});

saveData(data);
closeModal("joinModal");
this.reset();
render();
alert("âœ… æˆåŠŸåŠ å…¥å®¶åº­è®¡åˆ’ï¼");
}catch(err){
alert("âŒ åŠ å…¥å¤±è´¥ï¼š"+err.message);
console.error(err);
}
});

document.getElementById("userForm").addEventListener("submit",function(e){
e.preventDefault();
var name=document.getElementById("userNameInput").value.trim();
setUser(name||"æˆ‘");
closeModal("userModal");
render();
alert("âœ… åç§°å·²æ›´æ–°ä¸ºï¼š"+(name||"æˆ‘"));
});

document.getElementById("copyInviteBtn").addEventListener("click",function(){
var code=document.getElementById("inviteCode").textContent;
if(!code){alert("æ²¡æœ‰é‚€è¯·ç å¯å¤åˆ¶");return}
navigator.clipboard.writeText(code).then(function(){
alert("âœ… é‚€è¯·ç å·²å¤åˆ¶ï¼\\n\\nè¯·å‘ç»™å®¶äººï¼Œè®©ä»–ä»¬ç‚¹å‡»ã€åŠ å…¥å®¶åº­è®¡åˆ’ã€‘æŒ‰é’®ç²˜è´´åŠ å…¥ã€‚");
}).catch(function(){
alert("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶");
});
});

document.getElementById("goalsList").addEventListener("click",function(e){
var btn=e.target;
if(!btn||!btn.tagName||btn.tagName.toLowerCase()!=="button")return;

var gid=btn.dataset.id;
if(!gid)return;

if(btn.classList.contains("btn-deposit")){
var gname=btn.dataset.name;
document.getElementById("dGoalId").value=gid;
document.getElementById("dGoalName").value=gname;
showModal("depositModal");
}else if(btn.classList.contains("btn-invite")){
console.log("ç‚¹å‡»é‚€è¯·æŒ‰é’®ï¼ŒgoalId:",gid);
var data=loadData();
var goal=null;
for(var i=0;i<data.goals.length;i++){
if(data.goals[i].id===gid){goal=data.goals[i];break}
}
if(!goal){
alert("æ‰¾ä¸åˆ°è¯¥è®¡åˆ’");
return;
}

// ç”Ÿæˆåˆ†äº«ç ï¼ˆæ”¯æŒä¸­æ–‡ï¼‰
var share={
type:"savings_v4",
version:4,
planId:goal.id,
name:goal.name,
target:goal.target,
months:goal.months,
monthly:goal.monthly,
owner:goal.owner
};

try{
var code=encodeShareCode(share);
document.getElementById("inviteCode").textContent=code;
showModal("inviteModal");
console.log("é‚€è¯·ç ç”ŸæˆæˆåŠŸ");
}catch(err){
alert("ç”Ÿæˆé‚€è¯·ç å¤±è´¥ï¼š"+err.message);
console.error(err);
}
}else if(btn.classList.contains("btn-delete")){
if(!confirm("ç¡®å®šåˆ é™¤æ­¤è®¡åˆ’ï¼Ÿ"))return;
var d=loadData();
var newGoals=[];
for(var j=0;j<d.goals.length;j++){
if(d.goals[j].id!==gid)newGoals.push(d.goals[j]);
}
d.goals=newGoals;
var newRecs=[];
for(var k=0;k<d.records.length;k++){
if(d.records[k].goalId!==gid)newRecs.push(d.records[k]);
}
d.records=newRecs;
saveData(d);
render();
}
});

document.getElementById("renameLink").addEventListener("click",function(){
document.getElementById("userNameInput").value=getUser();
showModal("userModal");
});

document.getElementById("joinBtn").addEventListener("click",function(){
showModal("joinModal");
});

var closeBtns=document.querySelectorAll("[data-close]");
for(var c=0;c<closeBtns.length;c++){
closeBtns[c].addEventListener("click",function(){closeModal(this.dataset.close)});
}

var modals=document.querySelectorAll(".modal");
for(var m=0;m<modals.length;m++){
modals[m].addEventListener("click",function(e){if(e.target===this)closeModal(this.id)});
}

render();
console.log("âœ… åˆå§‹åŒ–å®Œæˆ");
});
</script>
</body>
</html>
